(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{170:function(e,t,n){},171:function(e,t,n){},172:function(e,t,n){},173:function(e,t,n){},174:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),i=n(48),o=n.n(i),r=(n(58),n(3)),l=n(4),c=n(6),u=n(5),h=n(1),d=n(7),g=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={error:!1},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({error:!0})}},{key:"render",value:function(){return this.state.error?s.a.createElement("div",{className:"error"},"Something went wrong."):this.props.children}}]),t}(a.Component),m=n(49),p=n.n(m),f=(n(72),function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={suggestions:[]},n.onSuggestionsFetchRequested=n.onSuggestionsFetchRequested.bind(Object(h.a)(n)),n.onSuggestionsClearRequested=n.onSuggestionsClearRequested.bind(Object(h.a)(n)),n.getSuggestionValue=n.getSuggestionValue.bind(Object(h.a)(n)),n.onSuggestionHighlighted=n.onSuggestionHighlighted.bind(Object(h.a)(n)),n.renderSuggestion=n.renderSuggestion.bind(Object(h.a)(n)),n.handleChange=n.handleChange.bind(Object(h.a)(n)),n.handleBlur=n.handleBlur.bind(Object(h.a)(n)),n.handleFocus=n.handleFocus.bind(Object(h.a)(n)),n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"getSuggestionValue",value:function(e){return e.recipe}},{key:"renderSuggestion",value:function(e,t){var n=t.query,a=(t.isHighlighted,e.recipe.split(new RegExp("(".concat(n,")"),"gi")));return s.a.createElement("div",null,a.map(function(e,t){var a=e.toLowerCase()===n.toLowerCase()?"highlight":null;return s.a.createElement("span",{key:t,className:a},e)}))}},{key:"onSuggestionHighlighted",value:function(e){var t=e.suggestion;t&&this.props.onChange(t.recipe)}},{key:"onSuggestionsFetchRequested",value:function(e){var t=e.value.trim().toLowerCase();if(0===t.length)return[];var n=this.props.suggestions.filter(function(e){var n=-1!==e.recipe.toLowerCase().indexOf(t),a=!1,s=!1;return void 0!==e.category&&(a=e.category.slice(0,t.length)===t),void 0!==e.cuisine&&(s=e.cuisine.slice(0,t.length)===t),n||a||s});this.setState({suggestions:n.slice(0,5)})}},{key:"onSuggestionsClearRequested",value:function(){this.setState({suggestions:[]})}},{key:"handleChange",value:function(e,t){var n=t.newValue;t.method;this.props.onChange(n)}},{key:"handleFocus",value:function(e){this.props.toggleFocus()}},{key:"handleBlur",value:function(e){this.props.toggleFocus()}},{key:"render",value:function(){var e=this.props,t=e.value,n={placeholder:e.placeholder,value:t,type:"search",onChange:this.handleChange,onBlur:this.handleBlur,onFocus:this.handleFocus};return s.a.createElement("div",{className:"typeahead"},s.a.createElement(g,null,s.a.createElement(p.a,{suggestions:this.state.suggestions,onSuggestionsFetchRequested:this.onSuggestionsFetchRequested,onSuggestionsClearRequested:this.onSuggestionsClearRequested,onSuggestionHighlighted:this.onSuggestionHighlighted,getSuggestionValue:this.getSuggestionValue,renderSuggestion:this.renderSuggestion,inputProps:n})))}}]),t}(a.Component));f.defaultProps={suggestions:[],placeholder:""};var v=f,b=(n(73),function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={value:"",onlyVegan:!1},n.handleSubmit=n.handleSubmit.bind(Object(h.a)(n)),n.handleCheckboxChange=n.handleCheckboxChange.bind(Object(h.a)(n)),n.handleValueChange=n.handleValueChange.bind(Object(h.a)(n)),n.toggleFocus=n.toggleFocus.bind(Object(h.a)(n)),n.handleClick=n.handleClick.bind(Object(h.a)(n)),n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.state.value.trim();this.setState({value:t}),t.length&&this.props.onSubmit(t.toLowerCase(),this.state.onlyVegan)}},{key:"handleValueChange",value:function(e){this.setState({value:"undefined"!==typeof e?e.replace(/[^a-zA-Z\s]/g,""):""})}},{key:"toggleFocus",value:function(){this.props.toggleFocus()}},{key:"handleCheckboxChange",value:function(e){this.setState({onlyVegan:e.target.checked})}},{key:"handleClick",value:function(e){var t=Math.floor(Math.random()*this.props.suggestions.length);this.props.onSubmit(this.props.suggestions[t].recipe,this.state.onlyVegan)}},{key:"render",value:function(){return function(e){for(var t,n,a=e.length-1;a>0;a--)n=Math.floor(Math.random()*(a+1)),t=e[a],e[a]=e[n],e[n]=t}(this.props.suggestions),s.a.createElement("div",{className:"search-bar"},s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("label",{className:"only-vegan"},s.a.createElement("input",{onChange:this.handleCheckboxChange,type:"checkbox"}),s.a.createElement("span",{className:"checkmark"}),"Vegan Only"),s.a.createElement("button",{type:"button",className:"random-recipe",onClick:this.handleClick},"Random Recipe"),s.a.createElement("br",null),s.a.createElement(v,{value:this.state.value,onChange:this.handleValueChange,toggleFocus:this.toggleFocus,placeholder:"What would you like to eat?",suggestions:this.props.suggestions})))}}]),t}(a.Component)),k=(n(74),function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleKeyUp=n.handleKeyUp.bind(Object(h.a)(n)),n.handleClick=n.handleClick.bind(Object(h.a)(n)),n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"handleKeyUp",value:function(e){27===e.keyCode&&(e.preventDefault(),this.props.onClose(),document.removeEventListener("keyup",this.handleKeyUp,!1))}},{key:"handleClick",value:function(e){this.modal.contains(e.target)||(this.props.onClose(),document.removeEventListener("click",this.handleClick,!1))}},{key:"componentDidMount",value:function(){document.addEventListener("keyup",this.handleKeyUp,!1),document.addEventListener("click",this.handleClick,!1),document.body.classList.add("modal-open")}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keyup",this.handleKeyUp,!1),document.removeEventListener("click",this.handleClick,!1),document.body.classList.remove("modal-open")}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{ref:function(t){return e.modalBackdrop=t},className:"modal-backdrop"},s.a.createElement("div",{ref:function(t){return e.modal=t},className:"modal"},s.a.createElement("div",{className:"modal-content"},this.props.children),s.a.createElement("button",{type:"button",className:"close-modal",onClick:this.props.onClose},this.props.buttonText?this.props.buttonText:"X")))}}]),t}(a.Component)),y=(n(75),function(e){if(null===e.checkbox.substitutes)return s.a.createElement("div",{className:"no-subs"},"Sorry, no substitutes found.");var t=e.checkbox.substitutes.ingredient.match(/\((.*)\)/),n=e.checkbox.substitutes.substitutions.map(function(e,t){return s.a.createElement("li",{key:t},e)});return s.a.createElement("div",{className:"substitutions"},null!==t&&s.a.createElement("div",{className:"measurement"},t[0]),s.a.createElement("ul",{className:"substitutions-list"},n))}),E=(n(76),function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={modalOpen:!1,stopwords:null,substitutions:null,checkboxes:[],allChecked:void 0,error:!1},n.mounted=!1,n.handleToggle=n.handleToggle.bind(Object(h.a)(n)),n.handleChange=n.handleChange.bind(Object(h.a)(n)),n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"getIngredientInputs",value:function(){var e,t=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.props.ingredients.map(function(a,i){var o=null;return n&&!t.state.checkboxes[i].checked&&(o=s.a.createElement(y,{checkbox:t.state.checkboxes[i]})),e=s.a.createElement("div",null,s.a.createElement("label",null,s.a.createElement("input",{id:i,type:"checkbox",onChange:t.handleChange}),s.a.createElement("span",{className:"checkmark"}),a),o),s.a.createElement("li",{key:i,className:"ingredient"},t.state.error?a:e)})}},{key:"findSubstitutes",value:function(e){e.preventDefault();var t=JSON.parse(JSON.stringify(this.state.checkboxes)),n=t.filter(function(e){return!e.checked});0!==n.length?(!function(e,t){for(var n=new RegExp("\\b("+t.join("|")+")\\b","g"),a=0;a<e.length;a++){var s=e[a].value.toLowerCase();s.indexOf(" or ")>=0&&(s=s.substring(0,s.indexOf(" or "))),e[a].value=s.replace(/ *\([^)]*\) */g," ").replace(/[^a-zA-Z\s]/g," ").replace(n," ").replace(/\s\s+/g," ").trim()}}(n,this.state.stopwords),function(e,t){for(var n=0;n<e.length;n++){for(var a=null,s=0;s<t.length;s++)if(t[s].ingredient.toLowerCase().replace(/ *\([^)]*\) */g,"").split(";").includes(e[n].value)){a=t[s];break}e[n].substitutes=a}}(n,this.state.substitutions),this.setState({checkboxes:t,allChecked:!1})):this.setState({allChecked:!0})}},{key:"handleChange",value:function(e){var t=JSON.parse(JSON.stringify(this.state.checkboxes));t[e.target.id].checked=e.target.checked,this.setState({checkboxes:t})}},{key:"handleToggle",value:function(){var e=JSON.parse(JSON.stringify(this.state.checkboxes));e.forEach(function(e){e.checked=!1}),this.setState(function(t){return{modalOpen:!t.modalOpen,checkboxes:e,allChecked:void 0}})}},{key:"componentDidMount",value:function(){var e=this;this.mounted=!0;var t=this.props.ingredients.map(function(e){return{value:e,checked:!1}});this.setState({checkboxes:t}),fetch("assets/stopwords.json").then(function(e){return e.json()}).then(function(t){e.mounted&&e.setState({stopwords:t})},function(t){console.error(t),e.setState({error:!0})}),fetch("assets/substitutions.json").then(function(e){return e.json()}).then(function(t){e.mounted&&e.setState({substitutions:t})},function(t){console.error(t),e.setState({error:!0})})}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"render",value:function(){var e,t=this,n=null,a=this.state.error&&this.state.modalOpen;return e=void 0===this.state.allChecked||this.state.allChecked?this.getIngredientInputs():this.getIngredientInputs(!0),a?n=s.a.createElement(k,{onClose:this.handleToggle},s.a.createElement("h1",null,"Ingredients"),s.a.createElement("ul",{className:"ingredients-list-error"},e)):this.state.modalOpen&&(n=s.a.createElement(k,{onClose:this.handleToggle},s.a.createElement("h1",null,"Ingredients"),s.a.createElement("p",{className:"subs-description"},"Check off all the ingredients you have and we'll try to find substitutes for the rest."),s.a.createElement("ul",{className:"ingredients-list"},e),s.a.createElement("button",{type:"button",className:"find-substitutes-button",onClick:function(e){return t.findSubstitutes(e)}},"Find Substitutes"))),s.a.createElement("div",{className:"ingredients-modal"},s.a.createElement("button",{className:"ingredients-button",onClick:this.handleToggle},"Ingredients"),n)}}]),t}(a.Component));E.defaultProps={ingredients:[]};var C=E,S=(n(77),function(e){var t=null;e.healthLabels&&(t=e.healthLabels.map(function(e,t){return s.a.createElement("span",{key:t,className:"health-label"},e)}));var n=e.ingredients?s.a.createElement(C,{ingredients:e.ingredients}):null;return s.a.createElement("div",{className:"recipe-info"},s.a.createElement("h2",{className:"title"},e.title),s.a.createElement("div",{className:"health-labels"},t),s.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:e.url},"Get Recipe!"),n)});S.defaultProps={healthLabels:null,ingredients:null};var O=S,j=n(50),N=(n(170),function(e){var t=null;e.calories&&e.yield?t=s.a.createElement("h3",{className:"calories"},Math.round(e.calories/e.yield)," calories"):e.calories&&(t=s.a.createElement("h3",{className:"calories"},Math.round(e.calories)," calories"));var n=null;if(e.digest){var a=function(e,t){void 0===t&&(t=1);for(var n=[],a=0;a<3;a++)n.push(Math.round(e[a].total/t));return[{labels:["Fat (g)","Carbs (g)","Protein (g)"],datasets:[{backgroundColor:["#FF7272","#FFDF73","#C4FF73"],data:n}]},{legend:{labels:{boxWidth:20,fontSize:12,fontFamily:"Cabin",fontColor:"white"}},responsive:!0,maintainAspectRatio:!1}]}(e.digest,e.yield);n=s.a.createElement("div",{className:"chart"},s.a.createElement(j.a,{data:a[0],options:a[1]}))}return s.a.createElement("div",{className:"health-info"},s.a.createElement("h3",{className:"nutrition"},e.yield?"Nutrition Per Serving":"Nutrition (entire recipe)"),t,e.digest?null:s.a.createElement("p",null,"No additional health information."),n)}),w=(n(171),function(e){return s.a.createElement("li",{className:"recipe-item"},s.a.createElement("img",{src:e.image,alt:"Recipe"}),s.a.createElement(O,{title:e.title,url:e.url,healthLabels:e.healthLabels,ingredients:e.ingredients}),s.a.createElement(N,{calories:e.calories,digest:e.digest,yield:e.yield}))}),F=(n(172),function(e){var t;return t=e.recipes.map(function(e,t){return s.a.createElement(w,{key:t,title:e.recipe.label,image:e.recipe.image,url:e.recipe.url,yield:e.recipe.yield,healthLabels:e.recipe.healthLabels,ingredients:e.recipe.ingredientLines,calories:e.recipe.calories,digest:e.recipe.digest})}),s.a.createElement("div",{className:"recipes-container",style:e.suggestionsOpen?{marginTop:160}:null},t)}),x=n(52),L=n.n(x),R=(n(173),function(e){for(var t=e.toLowerCase().split(/\s+/),n="",a=0;a<t.length-1;a++)n+=t[a]+"+";return n+=t[t.length-1]}),V=function(e){function t(){var e;return Object(r.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).state={suggestions:[],recipesResult:null,error:!1,noResults:!1,inputFocus:!1,loading:!1},e.mounted=!1,e.handleSubmit=e.handleSubmit.bind(Object(h.a)(e)),e.toggleFocus=e.toggleFocus.bind(Object(h.a)(e)),e}return Object(d.a)(t,e),Object(l.a)(t,[{key:"toggleFocus",value:function(){this.setState(function(e){return{inputFocus:!e.inputFocus}})}},{key:"handleSubmit",value:function(e,t){var n=this;this.setState({loading:!0}),fetch(function(e,t){return"https://api.edamam.com/search?q="+R(e)+"&app_id=0492f55a&app_key=8123095da3de3104e83077e6e4cb6506\t&health=vegetarian"+(t?"&health=vegan":"")+"&from=0&to=20"}(e,t)).then(function(e){return e.json()}).then(function(e){0===e.count?n.setState({noResults:!0,loading:!1}):n.setState({recipesResult:e.hits,loading:!1})},function(e){n.setState({error:!0,loading:!1})})}},{key:"componentDidMount",value:function(){var e=this;this.mounted=!0,fetch("assets/suggestions.json").then(function(e){return e.json()}).then(function(t){e.mounted&&e.setState({suggestions:t})},function(e){console.error("Sorry, an error occurred while trying to get suggestion data.")})}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"render",value:function(){var e;return this.state.loading?e=s.a.createElement("div",{className:"loading"},"Loading..."):this.state.error?e=s.a.createElement("div",{className:"error"},"Sorry, something went wrong."):this.state.noResults?e=s.a.createElement("div",{className:"error"},"Sorry, no results found for your search."):this.state.recipesResult&&(e=s.a.createElement(F,{recipes:this.state.recipesResult,suggestionsOpen:this.state.inputFocus})),s.a.createElement("div",{className:"app"},s.a.createElement("div",{className:"heading"},s.a.createElement("h1",null,"PRESTO"),s.a.createElement("img",{src:L.a,alt:"Veg Sign"}),s.a.createElement("p",null,"A vegan & vegetarian recipe search engine!")),s.a.createElement(b,{onSubmit:this.handleSubmit,toggleFocus:this.toggleFocus,suggestions:this.state.suggestions}),e)}}]),t}(a.Component),q=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function T(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}o.a.render(s.a.createElement(V,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/presto",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/presto","/service-worker.js");q?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):T(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):T(e)})}}()},52:function(e,t,n){e.exports=n.p+"static/media/vegetarian-mark.31ffd1dc.svg"},53:function(e,t,n){e.exports=n(174)},58:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){},77:function(e,t,n){}},[[53,1,2]]]);
//# sourceMappingURL=main.0edb6606.chunk.js.map